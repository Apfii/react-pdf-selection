{"version":3,"sources":["../../react-pdf-selection/dist/index.js","../../react-pdf-selection/dist/components/NewAreaSelection.js","../../react-pdf-selection/dist/utils/coordinates.js","../../react-pdf-selection/dist/components/PdfLoader.js","../../react-pdf-selection/dist/components/PdfViewer.js","../../react-pdf-selection/dist/utils/index.js","../../react-pdf-selection/dist/utils/dom.js","../../react-pdf-selection/dist/utils/image.js","../../react-pdf-selection/dist/utils/rects.js","../../react-pdf-selection/dist/components/AreaSelection.js","../../react-pdf-selection/dist/components/TextSelection.js","../../react-pdf-selection/dist/components/SelectionTooltip.js","example-pdfs.ts","App.tsx","index.tsx"],"names":["Object","defineProperty","exports","value","PdfViewer","PdfLoader","SelectionTooltip","NewAreaSelection","NewAreaSelection_1","require","enumerable","get","PdfLoader_1","PdfViewer_1","SelectionTooltip_1","__assign","this","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__importDefault","mod","__esModule","react_1","_a","position","default","createElement","style","boundingRect","border","background","mixBlendMode","viewportPosition","positionToViewport","viewportBoundingRect","normalizePosition","normalizeBoundingRect","relativizeBoundingRect","rect","pageOffset","top","width","height","left","viewport","absolute","rects","relative","map","normalized","pageNumber","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","__","constructor","create","__createBinding","o","m","k","k2","undefined","__setModuleDefault","v","__importStar","result","pdfjs_dist_1","GlobalWorkerOptions","workerSrc","_super","props","_this","state","discardDocument","document","destroy","componentDidMount","load","componentWillUnmount","pdfDocument","componentDidUpdate","url","componentDidCatch","error","info","onError","setState","getDocument","promise","then","e","render","children","beforeLoad","_b","renderError","errorMessage","cloneElement","Component","pdf_viewer_1","utils_1","coordinates_1","AreaSelection_1","TextSelection_1","isAreaSelection","selection","pageHeights","pageMargin","textSelectionEnabled","eventBus","EventBus","linkService","PDFLinkService","pdfContainerRefCallback","ref","containerNode","mountDocument","getPageOffset","slice","reduce","a","containerCoords","pageX","pageY","x","offsetLeft","y","offsetTop","rectsToLayout","page","getWindow","node","getComputedStyle","parseInt","borderLeftWidth","paddingLeft","offsetTopPage","borderTopWidth","paddingTop","number","resize","viewer","firstElementChild","currentScaleValue","prop","from","childNodes","clientHeight","resetSelections","_c","_d","onTextSelection","onAreaSelection","areaSelection","onSelectionChange","getSelection","isCollapsed","range","rangeCount","getRangeAt","getPageFromRange","getClientRects","pageRects","clientWidth","getBoundingRect","text","cloneContents","textContent","onAreaSelectStart","event","start","originTarget","target","locked","getAreaSelectionPosition","end","getPageFromElement","onAreaSelectChange","onAreaSelectEnd","pageView","getPageView","image","getAreaAsPNG","canvas","onMouseDown","enableAreaSelection","addEventListener","onMouseMove","onMouseUp","preventDefault","stopPropagation","removeEventListener","onKeyDown","code","addEventListeners","on","defaultView","removeEventListeners","off","PDFViewer","container","enhanceTextSelection","setDocument","setViewer","window","getPageViewport","renderSelection","pageViewport","normalizedSelection","AreaSelection","key","TextSelection","textSelection","newAreaViewport","className","userSelect","pointerEvents","onContextMenu","onPointerDown","selections","Math","min","abs","prevProps","findOrCreateContainerLayer","dom_1","image_1","rects_1","elm","ownerDocument","closest","Number","dataset","parentElement","startContainer","doc","layer","querySelector","appendChild","newCanvas","newCanvasContext","getContext","dpr","devicePixelRatio","drawImage","toDataURL","overlaps","A","B","sameLine","yMargin","nextTo","xMargin","Aright","Bright","extendWidth","max","containerEl","shouldOptimize","clientRects","offset","getBoundingClientRect","scrollTop","scrollLeft","sort","toRemove","Set","firstPass","filter","every","otherRect","passCount","forEach","has","add","optimizeClientRects","X0","X1","Y0","Y1","optimal","res","cursor","transition","zIndex","right","margin","backgroundColor","color","padding","borderRadius","pdfs","App","useState","pdfIdx","setPdfIdx","setSelection","setAndLogSelection","highlightTip","console","log","borderBottom","display","borderRight","altKey","onClick","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.355d2bad.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PdfViewer = exports.PdfLoader = exports.SelectionTooltip = exports.NewAreaSelection = void 0;\nvar NewAreaSelection_1 = require(\"./components/NewAreaSelection\");\nObject.defineProperty(exports, \"NewAreaSelection\", { enumerable: true, get: function () { return NewAreaSelection_1.NewAreaSelection; } });\nvar PdfLoader_1 = require(\"./components/PdfLoader\");\nObject.defineProperty(exports, \"PdfLoader\", { enumerable: true, get: function () { return PdfLoader_1.PdfLoader; } });\nvar PdfViewer_1 = require(\"./components/PdfViewer\");\nObject.defineProperty(exports, \"PdfViewer\", { enumerable: true, get: function () { return PdfViewer_1.PdfViewer; } });\nvar SelectionTooltip_1 = require(\"./components/SelectionTooltip\");\nObject.defineProperty(exports, \"SelectionTooltip\", { enumerable: true, get: function () { return SelectionTooltip_1.SelectionTooltip; } });\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NewAreaSelection = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar NewAreaSelection = function (_a) {\n    var position = _a.position;\n    return (react_1.default.createElement(\"div\", { style: __assign(__assign({}, position.boundingRect), { position: \"absolute\", border: \"1px dashed #333\", background: \"rgba(252, 232, 151, 1)\", mixBlendMode: \"multiply\" }) }));\n};\nexports.NewAreaSelection = NewAreaSelection;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.viewportPosition = exports.positionToViewport = exports.viewportBoundingRect = exports.normalizePosition = exports.normalizeBoundingRect = exports.relativizeBoundingRect = void 0;\nvar relativizeBoundingRect = function (rect, _a) {\n    var pageOffset = _a.pageOffset;\n    return __assign(__assign({}, rect), { top: rect.top - pageOffset });\n};\nexports.relativizeBoundingRect = relativizeBoundingRect;\nvar normalizeBoundingRect = function (rect, _a) {\n    var width = _a.width, height = _a.height, pageOffset = _a.pageOffset;\n    return {\n        left: rect.left / width,\n        top: (rect.top - pageOffset) / height,\n        width: rect.width / width,\n        height: rect.height / height,\n    };\n};\nexports.normalizeBoundingRect = normalizeBoundingRect;\nvar normalizePosition = function (position, viewport) {\n    return {\n        absolute: {\n            boundingRect: position.boundingRect,\n            rects: position.rects,\n        },\n        relative: {\n            boundingRect: exports.relativizeBoundingRect(position.boundingRect, viewport),\n            rects: position.rects.map(function (rect) { return exports.relativizeBoundingRect(rect, viewport); }),\n        },\n        normalized: {\n            boundingRect: exports.normalizeBoundingRect(position.boundingRect, viewport),\n            rects: position.rects.map(function (rect) { return exports.normalizeBoundingRect(rect, viewport); }),\n        },\n        pageNumber: position.pageNumber,\n    };\n};\nexports.normalizePosition = normalizePosition;\nvar viewportBoundingRect = function (rect, _a) {\n    var width = _a.width, height = _a.height, pageOffset = _a.pageOffset;\n    return {\n        left: rect.left * width,\n        top: rect.top * height + pageOffset,\n        width: rect.width * width,\n        height: rect.height * height,\n    };\n};\nexports.viewportBoundingRect = viewportBoundingRect;\nvar positionToViewport = function (position, viewport) {\n    return {\n        boundingRect: exports.viewportBoundingRect(position.boundingRect, viewport),\n        rects: position.rects.map(function (rect) { return exports.viewportBoundingRect(rect, viewport); }),\n        pageNumber: position.pageNumber,\n    };\n};\nexports.positionToViewport = positionToViewport;\nvar viewportPosition = function (position, viewport) {\n    return {\n        boundingRect: exports.viewportBoundingRect(position.normalized.boundingRect, viewport),\n        rects: position.normalized.rects.map(function (rect) { return exports.viewportBoundingRect(rect, viewport); }),\n        pageNumber: position.pageNumber,\n    };\n};\nexports.viewportPosition = viewportPosition;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PdfLoader = void 0;\nvar pdfjs_dist_1 = require(\"pdfjs-dist\");\nvar react_1 = __importStar(require(\"react\"));\n// Set the PDF worker\npdfjs_dist_1.GlobalWorkerOptions.workerSrc = \"//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.worker.min.js\";\nvar PdfLoader = /** @class */ (function (_super) {\n    __extends(PdfLoader, _super);\n    function PdfLoader(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = {};\n        return _this;\n    }\n    PdfLoader.prototype.discardDocument = function (document) {\n        document && document.destroy();\n    };\n    PdfLoader.prototype.componentDidMount = function () {\n        this.load();\n    };\n    PdfLoader.prototype.componentWillUnmount = function () {\n        this.discardDocument(this.state.pdfDocument);\n    };\n    PdfLoader.prototype.componentDidUpdate = function (_a) {\n        var url = _a.url;\n        if (this.props.url !== url) {\n            this.load();\n        }\n    };\n    PdfLoader.prototype.componentDidCatch = function (error, info) {\n        var onError = this.props.onError;\n        if (onError) {\n            onError(error);\n        }\n        this.setState({ pdfDocument: undefined, error: error });\n    };\n    PdfLoader.prototype.load = function () {\n        var _this = this;\n        var url = this.props.url;\n        var pdfDocument = this.state.pdfDocument;\n        this.setState({ pdfDocument: undefined, error: undefined });\n        try {\n            this.discardDocument(pdfDocument);\n            if (!url)\n                return;\n            pdfjs_dist_1.getDocument(url).promise.then(function (pdfDocument) {\n                _this.setState({ pdfDocument: pdfDocument });\n            });\n        }\n        catch (e) {\n            this.componentDidCatch(e);\n        }\n    };\n    PdfLoader.prototype.render = function () {\n        var _a = this.props, children = _a.children, beforeLoad = _a.beforeLoad;\n        var _b = this.state, pdfDocument = _b.pdfDocument, error = _b.error;\n        return error ? this.renderError() : !pdfDocument || !children ? beforeLoad : children(pdfDocument);\n    };\n    PdfLoader.prototype.renderError = function () {\n        var errorMessage = this.props.errorMessage;\n        if (errorMessage) {\n            return react_1.default.cloneElement(errorMessage, { error: this.state.error });\n        }\n        return null;\n    };\n    return PdfLoader;\n}(react_1.Component));\nexports.PdfLoader = PdfLoader;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PdfViewer = void 0;\n// @ts-ignore-next-line\nvar pdf_viewer_1 = require(\"pdfjs-dist/web/pdf_viewer\");\nrequire(\"pdfjs-dist/web/pdf_viewer.css\");\nvar react_1 = __importStar(require(\"react\"));\nrequire(\"../style/pdf_viewer.css\");\nvar utils_1 = require(\"../utils\");\nvar coordinates_1 = require(\"../utils/coordinates\");\nvar AreaSelection_1 = require(\"./AreaSelection\");\nvar NewAreaSelection_1 = require(\"./NewAreaSelection\");\nvar TextSelection_1 = require(\"./TextSelection\");\nvar isAreaSelection = function (selection) { return \"image\" in selection; };\nvar PdfViewer = /** @class */ (function (_super) {\n    __extends(PdfViewer, _super);\n    function PdfViewer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            pageHeights: [],\n            pageMargin: 0,\n            textSelectionEnabled: true,\n        };\n        _this.eventBus = new pdf_viewer_1.EventBus();\n        _this.linkService = new pdf_viewer_1.PDFLinkService({ eventBus: _this.eventBus });\n        _this.pdfContainerRefCallback = function (ref) {\n            if (ref) {\n                _this.setState({ containerNode: ref }, function () { return _this.mountDocument(); });\n            }\n        };\n        _this.getPageOffset = function (pageNumber) {\n            var _a = _this.state, pageHeights = _a.pageHeights, pageMargin = _a.pageMargin;\n            return pageHeights.slice(0, pageNumber - 1).reduce(function (a, b) { return a + b + pageMargin; }, 0);\n        };\n        _this.containerCoords = function (pageX, pageY) {\n            if (!_this.state.containerNode)\n                return;\n            return {\n                x: pageX - _this.state.containerNode.offsetLeft,\n                y: pageY - _this.state.containerNode.offsetTop,\n            };\n        };\n        _this.rectsToLayout = function (page, rects) {\n            return rects.map(function (rect) {\n                var style = utils_1.getWindow(page.node).getComputedStyle(page.node);\n                var offsetLeft = parseInt(style.borderLeftWidth, 10) + parseInt(style.paddingLeft, 10);\n                var offsetTopPage = parseInt(style.borderTopWidth, 10) + parseInt(style.paddingTop, 10);\n                var pageOffset = _this.getPageOffset(page.number);\n                var offsetTop = pageOffset > 0 ? pageOffset - _this.state.pageMargin + offsetTopPage : offsetTopPage;\n                return __assign(__assign({}, rect), { left: rect.left + offsetLeft, top: rect.top + offsetTop });\n            });\n        };\n        _this.resize = function () {\n            if (!_this.state.viewer)\n                return;\n            var page = _this.state.viewer.viewer.firstElementChild;\n            if (!page)\n                return;\n            _this.state.viewer.currentScaleValue = \"page-width\";\n            var style = utils_1.getWindow(page).getComputedStyle(page);\n            var layoutProperties = [\"marginTop\", \"marginBottom\", \"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\"];\n            var pageMargin = layoutProperties.map(function (prop) { return parseInt(style[prop], 10); }).reduce(function (a, b) { return a + b; }, 0);\n            var pageHeights = Array.from(_this.state.viewer.viewer.childNodes).map(function (page) { return page.clientHeight; });\n            _this.setState({ pageHeights: pageHeights, pageMargin: pageMargin });\n        };\n        _this.resetSelections = function () {\n            var _a, _b, _c, _d;\n            (_b = (_a = _this.props).onTextSelection) === null || _b === void 0 ? void 0 : _b.call(_a);\n            (_d = (_c = _this.props).onAreaSelection) === null || _d === void 0 ? void 0 : _d.call(_c);\n            _this.setState({ areaSelection: undefined, textSelectionEnabled: true });\n        };\n        _this.onSelectionChange = function () {\n            var _a, _b;\n            if (!_this.state.viewer)\n                return;\n            var selection = utils_1.getWindow(_this.state.containerNode).getSelection();\n            if (!selection || selection.isCollapsed)\n                return;\n            var range = selection.rangeCount > 0 ? selection.getRangeAt(0) : undefined;\n            if (!range)\n                return;\n            var page = utils_1.getPageFromRange(range);\n            if (!page)\n                return;\n            var pageOffset = _this.getPageOffset(page.number);\n            var rects = utils_1.getClientRects(range, page.node);\n            if (rects.length === 0)\n                return;\n            var pageRects = _this.rectsToLayout(page, rects);\n            var viewport = { width: page.node.clientWidth, height: page.node.clientHeight, pageOffset: pageOffset };\n            var boundingRect = utils_1.getBoundingRect(pageRects);\n            var position = coordinates_1.normalizePosition({ boundingRect: boundingRect, rects: pageRects, pageNumber: page.number }, viewport);\n            var text = Array.from(range.cloneContents().childNodes).reduce(function (a, b) { return a + \" \" + b.textContent; }, \"\");\n            (_b = (_a = _this.props).onTextSelection) === null || _b === void 0 ? void 0 : _b.call(_a, { position: position, text: text });\n        };\n        _this.onAreaSelectStart = function (event) {\n            _this.setState({ textSelectionEnabled: false });\n            var start = _this.containerCoords(event.pageX, event.pageY);\n            if (!start)\n                return;\n            _this.setState({\n                areaSelection: { originTarget: event.target, start: start, locked: false },\n            });\n        };\n        _this.getAreaSelectionPosition = function (event) {\n            var areaSelection = _this.state.areaSelection;\n            if (!areaSelection || !areaSelection.originTarget || !areaSelection.start || areaSelection.locked)\n                return;\n            var end = _this.containerCoords(event.pageX, event.pageY);\n            if (!end)\n                return;\n            var page = utils_1.getPageFromElement(areaSelection.originTarget);\n            if (!page)\n                return;\n            var pageOffset = _this.getPageOffset(page.number);\n            var viewport = { width: page.node.clientWidth, height: page.node.clientHeight, pageOffset: pageOffset };\n            var boundingRect = _this.getBoundingRect(areaSelection.start, end);\n            return coordinates_1.normalizePosition({ boundingRect: boundingRect, rects: [boundingRect], pageNumber: page.number }, viewport);\n        };\n        _this.onAreaSelectChange = function (event) {\n            var areaSelection = _this.state.areaSelection;\n            var position = _this.getAreaSelectionPosition(event);\n            if (!position)\n                return;\n            _this.setState({ areaSelection: __assign(__assign({}, areaSelection), { position: position }) });\n        };\n        _this.onAreaSelectEnd = function (event) {\n            var _a, _b;\n            var areaSelection = _this.state.areaSelection;\n            if (!_this.state.viewer)\n                return;\n            var position = _this.getAreaSelectionPosition(event);\n            if (!position)\n                return;\n            var pageView = _this.state.viewer.getPageView(position.pageNumber - 1);\n            if (!pageView)\n                return;\n            var image = utils_1.getAreaAsPNG(pageView.canvas, position.relative.boundingRect);\n            (_b = (_a = _this.props).onAreaSelection) === null || _b === void 0 ? void 0 : _b.call(_a, { position: position, image: image });\n            _this.setState({\n                areaSelection: __assign(__assign({}, areaSelection), { position: position, locked: true }),\n                textSelectionEnabled: true,\n            });\n        };\n        _this.onMouseDown = function (event) {\n            var _a, _b;\n            _this.resetSelections();\n            if (!((_b = (_a = _this.props).enableAreaSelection) === null || _b === void 0 ? void 0 : _b.call(_a, event)))\n                return;\n            document.addEventListener(\"pointermove\", _this.onMouseMove);\n            document.addEventListener(\"pointerup\", _this.onMouseUp);\n            event.preventDefault();\n            event.stopPropagation();\n            _this.onAreaSelectStart(event);\n        };\n        _this.onMouseMove = function (event) {\n            event.stopPropagation();\n            _this.onAreaSelectChange(event);\n        };\n        _this.onMouseUp = function (event) {\n            document.removeEventListener(\"pointermove\", _this.onMouseMove);\n            document.removeEventListener(\"pointerup\", _this.onMouseUp);\n            event.stopPropagation();\n            _this.onAreaSelectEnd(event);\n        };\n        _this.onKeyDown = function (event) {\n            var _a, _b;\n            if (event.code === \"Escape\")\n                (_b = (_a = _this.props).onTextSelection) === null || _b === void 0 ? void 0 : _b.call(_a);\n        };\n        _this.addEventListeners = function () {\n            var _a;\n            _this.eventBus.on(\"pagesinit\", _this.resize);\n            document.addEventListener(\"keydown\", _this.onKeyDown);\n            document.addEventListener(\"selectionchange\", _this.onSelectionChange);\n            (_a = document.defaultView) === null || _a === void 0 ? void 0 : _a.addEventListener(\"resize\", _this.resize);\n        };\n        _this.removeEventListeners = function () {\n            var _a;\n            _this.eventBus.off(\"pagesinit\", _this.resize);\n            document.removeEventListener(\"keydown\", _this.onKeyDown);\n            document.removeEventListener(\"selectionchange\", _this.onSelectionChange);\n            (_a = document.defaultView) === null || _a === void 0 ? void 0 : _a.removeEventListener(\"resize\", _this.resize);\n        };\n        _this.mountDocument = function () {\n            _this.removeEventListeners();\n            var viewer = _this.state.viewer ||\n                new pdf_viewer_1.PDFViewer({\n                    container: _this.state.containerNode,\n                    eventBus: _this.eventBus,\n                    enhanceTextSelection: true,\n                    linkService: _this.linkService,\n                });\n            _this.linkService.setDocument(_this.props.pdfDocument);\n            _this.linkService.setViewer(viewer);\n            viewer.setDocument(_this.props.pdfDocument);\n            _this.setState({ viewer: viewer });\n            _this.addEventListeners();\n            // debug\n            window.PdfViewer = _this;\n        };\n        _this.getPageViewport = function (pageNumber) {\n            if (!_this.state.viewer)\n                return;\n            var pageView = _this.state.viewer.getPageView(pageNumber - 1);\n            if (!pageView)\n                return;\n            return __assign(__assign({}, pageView.viewport), { pageOffset: _this.getPageOffset(pageNumber) });\n        };\n        _this.renderSelection = function (selection, i) {\n            var pageViewport = _this.getPageViewport(selection.position.pageNumber);\n            if (!pageViewport)\n                return null;\n            var normalizedSelection = __assign(__assign({}, selection), { position: utils_1.positionToViewport(selection.position, pageViewport) });\n            return isAreaSelection(normalizedSelection) ? (react_1.default.createElement(AreaSelection_1.AreaSelection, { key: i, areaSelection: normalizedSelection })) : (react_1.default.createElement(TextSelection_1.TextSelection, { key: i, textSelection: normalizedSelection }));\n        };\n        _this.render = function () {\n            var _a, _b, _c;\n            var newAreaViewport = ((_a = _this.state.areaSelection) === null || _a === void 0 ? void 0 : _a.position) ? _this.getPageViewport(_this.state.areaSelection.position.pageNumber)\n                : undefined;\n            return (react_1.default.createElement(\"div\", { ref: _this.pdfContainerRefCallback, className: \"pdfViewerContainer\", style: __assign({ position: \"relative\" }, (_this.state.textSelectionEnabled\n                    ? {}\n                    : {\n                        userSelect: \"none\",\n                        pointerEvents: \"none\",\n                    })), onContextMenu: function (e) { return e.preventDefault(); }, onPointerDown: _this.onMouseDown },\n                react_1.default.createElement(\"div\", { className: \"pdfViewer\" }),\n                react_1.default.createElement(\"div\", { className: \"pdfViewer__area-selection\" }, ((_b = _this.state.areaSelection) === null || _b === void 0 ? void 0 : _b.position) && newAreaViewport && (react_1.default.createElement(NewAreaSelection_1.NewAreaSelection, { position: utils_1.viewportPosition(_this.state.areaSelection.position, newAreaViewport) }))),\n                react_1.default.createElement(\"div\", null, (_c = _this.props.selections) === null || _c === void 0 ? void 0 : _c.map(function (selection, i) {\n                    return _this.renderSelection(selection, i);\n                })),\n                _this.props.children));\n        };\n        return _this;\n    }\n    PdfViewer.prototype.getBoundingRect = function (start, end) {\n        return {\n            left: Math.min(end.x, start.x),\n            top: Math.min(end.y, start.y),\n            width: Math.abs(end.x - start.x),\n            height: Math.abs(end.y - start.y),\n        };\n    };\n    PdfViewer.prototype.componentDidUpdate = function (prevProps) {\n        if (prevProps.pdfDocument !== this.props.pdfDocument) {\n            this.mountDocument();\n            return;\n        }\n    };\n    return PdfViewer;\n}(react_1.Component));\nexports.PdfViewer = PdfViewer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.positionToViewport = exports.viewportPosition = exports.getPageFromElement = exports.getPageFromRange = exports.getWindow = exports.findOrCreateContainerLayer = exports.getAreaAsPNG = exports.getDocument = exports.getClientRects = exports.getBoundingRect = void 0;\nvar coordinates_1 = require(\"./coordinates\");\nObject.defineProperty(exports, \"viewportPosition\", { enumerable: true, get: function () { return coordinates_1.viewportPosition; } });\nObject.defineProperty(exports, \"positionToViewport\", { enumerable: true, get: function () { return coordinates_1.positionToViewport; } });\nvar dom_1 = require(\"./dom\");\nObject.defineProperty(exports, \"getDocument\", { enumerable: true, get: function () { return dom_1.getDocument; } });\nObject.defineProperty(exports, \"findOrCreateContainerLayer\", { enumerable: true, get: function () { return dom_1.findOrCreateContainerLayer; } });\nObject.defineProperty(exports, \"getPageFromElement\", { enumerable: true, get: function () { return dom_1.getPageFromElement; } });\nObject.defineProperty(exports, \"getPageFromRange\", { enumerable: true, get: function () { return dom_1.getPageFromRange; } });\nObject.defineProperty(exports, \"getWindow\", { enumerable: true, get: function () { return dom_1.getWindow; } });\nvar image_1 = require(\"./image\");\nObject.defineProperty(exports, \"getAreaAsPNG\", { enumerable: true, get: function () { return image_1.getAreaAsPNG; } });\nvar rects_1 = require(\"./rects\");\nObject.defineProperty(exports, \"getBoundingRect\", { enumerable: true, get: function () { return rects_1.getBoundingRect; } });\nObject.defineProperty(exports, \"getClientRects\", { enumerable: true, get: function () { return rects_1.getClientRects; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findOrCreateContainerLayer = exports.getPageFromRange = exports.getPageFromElement = exports.getWindow = exports.getDocument = void 0;\nvar getDocument = function (elm) { return (elm || {}).ownerDocument || document; };\nexports.getDocument = getDocument;\nvar getWindow = function (elm) { return (exports.getDocument(elm) || {}).defaultView || window; };\nexports.getWindow = getWindow;\nvar getPageFromElement = function (target) {\n    var node = target.closest(\".page\");\n    if (!node)\n        return null;\n    var number = Number(node.dataset.pageNumber);\n    return { node: node, number: number };\n};\nexports.getPageFromElement = getPageFromElement;\nvar getPageFromRange = function (range) {\n    var parentElement = range.startContainer.parentElement;\n    if (!parentElement)\n        return;\n    return exports.getPageFromElement(parentElement);\n};\nexports.getPageFromRange = getPageFromRange;\nvar findOrCreateContainerLayer = function (container, className) {\n    var doc = exports.getDocument(container);\n    var layer = container.querySelector(\".\" + className);\n    if (!layer) {\n        layer = doc.createElement(\"div\");\n        layer.className = className;\n        container.appendChild(layer);\n    }\n    return layer;\n};\nexports.findOrCreateContainerLayer = findOrCreateContainerLayer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAreaAsPNG = void 0;\nvar getAreaAsPNG = function (canvas, position) {\n    var left = position.left, top = position.top, width = position.width, height = position.height;\n    var newCanvas = canvas.ownerDocument.createElement(\"canvas\");\n    newCanvas.width = width;\n    newCanvas.height = height;\n    var newCanvasContext = newCanvas.getContext(\"2d\");\n    if (!newCanvasContext) {\n        return \"\";\n    }\n    var dpr = window.devicePixelRatio;\n    newCanvasContext.drawImage(canvas, left * dpr, top * dpr, width * dpr, height * dpr, 0, 0, width, height);\n    return newCanvas.toDataURL(\"image/png\");\n};\nexports.getAreaAsPNG = getAreaAsPNG;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBoundingRect = exports.getClientRects = void 0;\nvar sort = function (rects) {\n    return rects.sort(function (A, B) {\n        var top = A.top - B.top;\n        if (top === 0) {\n            return A.left - B.left;\n        }\n        return top;\n    });\n};\nvar overlaps = function (A, B) { return A.left <= B.left && B.left <= A.left + A.width; };\nvar sameLine = function (A, B, yMargin) {\n    if (yMargin === void 0) { yMargin = 5; }\n    return Math.abs(A.top - B.top) < yMargin && Math.abs(A.height - B.height) < yMargin;\n};\nvar inside = function (A, B) {\n    return A.top > B.top && A.left > B.left && A.top + A.height < B.top + B.height && A.left + A.width < B.left + B.width;\n};\nvar nextTo = function (A, B, xMargin) {\n    if (xMargin === void 0) { xMargin = 10; }\n    var Aright = A.left + A.width;\n    var Bright = B.left + B.width;\n    return A.left <= B.left && Aright <= Bright && B.left - Aright <= xMargin;\n};\nvar extendWidth = function (A, B) {\n    // extend width of A to cover B\n    A.width = Math.max(B.width - A.left + B.left, A.width);\n};\nvar optimizeClientRects = function (clientRects) {\n    var rects = sort(clientRects);\n    var toRemove = new Set();\n    var firstPass = rects.filter(function (rect) {\n        return rects.every(function (otherRect) {\n            return !inside(rect, otherRect);\n        });\n    });\n    var passCount = 0;\n    while (passCount <= 2) {\n        firstPass.forEach(function (A) {\n            firstPass.forEach(function (B) {\n                if (A === B || toRemove.has(A) || toRemove.has(B)) {\n                    return;\n                }\n                if (!sameLine(A, B)) {\n                    return;\n                }\n                if (overlaps(A, B)) {\n                    extendWidth(A, B);\n                    A.height = Math.max(A.height, B.height);\n                    toRemove.add(B);\n                }\n                if (nextTo(A, B)) {\n                    extendWidth(A, B);\n                    toRemove.add(B);\n                }\n            });\n        });\n        passCount += 1;\n    }\n    return firstPass.filter(function (rect) { return !toRemove.has(rect); });\n};\nvar getClientRects = function (range, containerEl, shouldOptimize) {\n    if (shouldOptimize === void 0) { shouldOptimize = true; }\n    var clientRects = Array.from(range.getClientRects());\n    var offset = containerEl.getBoundingClientRect();\n    var rects = clientRects.map(function (rect) {\n        return {\n            top: rect.top + containerEl.scrollTop - offset.top,\n            left: rect.left + containerEl.scrollLeft - offset.left,\n            width: rect.width,\n            height: rect.height,\n        };\n    });\n    return shouldOptimize ? optimizeClientRects(rects) : rects;\n};\nexports.getClientRects = getClientRects;\nvar getBoundingRect = function (clientRects) {\n    var rects = Array.from(clientRects).map(function (rect) {\n        var left = rect.left, top = rect.top, width = rect.width, height = rect.height;\n        var X0 = left;\n        var X1 = left + width;\n        var Y0 = top;\n        var Y1 = top + height;\n        return { X0: X0, X1: X1, Y0: Y0, Y1: Y1 };\n    });\n    var optimal = rects.reduce(function (res, rect) {\n        return {\n            X0: Math.min(res.X0, rect.X0),\n            X1: Math.max(res.X1, rect.X1),\n            Y0: Math.min(res.Y0, rect.Y0),\n            Y1: Math.max(res.Y1, rect.Y1),\n        };\n    }, rects[0]);\n    var X0 = optimal.X0, X1 = optimal.X1, Y0 = optimal.Y0, Y1 = optimal.Y1;\n    return {\n        left: X0,\n        top: Y0,\n        width: X1 - X0,\n        height: Y1 - Y0,\n    };\n};\nexports.getBoundingRect = getBoundingRect;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AreaSelection = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar AreaSelection = function (_a) {\n    var areaSelection = _a.areaSelection;\n    return (react_1.default.createElement(\"div\", { style: __assign(__assign({}, areaSelection.position.boundingRect), { position: \"absolute\", border: \"1px dashed #333\", background: \"rgba(252, 232, 151, 1)\", mixBlendMode: \"multiply\" }) }));\n};\nexports.AreaSelection = AreaSelection;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextSelection = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar TextSelection = function (_a) {\n    var textSelection = _a.textSelection;\n    return (react_1.default.createElement(\"div\", null, textSelection.position.rects.map(function (rect, i) { return (react_1.default.createElement(\"div\", { key: i, style: __assign(__assign({}, rect), { cursor: \"pointer\", position: \"absolute\", background: \"rgba(255, 226, 143, 1)\", mixBlendMode: \"multiply\", transition: \"background 0.3s\" }) })); })));\n};\nexports.TextSelection = TextSelection;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionTooltip = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar SelectionTooltip = function (_a) {\n    var selection = _a.selection;\n    return (react_1.default.createElement(\"div\", { className: \"pdfViewer__highlight-tip\", style: {\n            top: selection.position.absolute.boundingRect.top - 40,\n            position: \"absolute\",\n            zIndex: 99,\n            width: \"120px\",\n            left: 0,\n            right: 0,\n            margin: \"auto\",\n            cursor: \"pointer\",\n            backgroundColor: \"#3d464d\",\n            border: \"1px solid rgba(255, 255, 255, 0.25)\",\n            color: \"white\",\n            padding: \"5px 10px\",\n            borderRadius: \"3px\",\n        } }, \"Add highlight\"));\n};\nexports.SelectionTooltip = SelectionTooltip;\n","import { SelectionType } from \"react-pdf-selection\";\n\nexport const pdfs: { url: string; selections: SelectionType[] }[] = [\n    {\n        url: \"https://arxiv.org/pdf/1708.08021.pdf\",\n        selections: [\n            {\n                \"text\": \" 1.2    Overview\",\n                \"position\": {\n                    \"boundingRect\": {\n                        \"left\": 0.11752693422379032,\n                        \"top\": 0.4810394925107524,\n                        \"width\": 0.13823655651461694,\n                        \"height\": 0.016550522648083623\n                    },\n                    \"rects\": [\n                        {\n                            \"left\": 0.11752693422379032,\n                            \"top\": 0.4810394925107524,\n                            \"width\": 0.13823655651461694,\n                            \"height\": 0.016550522648083623\n                        }\n                    ],\n                    \"pageNumber\": 2\n                }\n            },\n            {\n                \"image\": \"data:image/png;base64,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\",\n                \"position\": {\n                    \"boundingRect\": {\n                        \"left\": 0.15354838709677418,\n                        \"top\": 0.22125435540069685,\n                        \"width\": 0.13161290322580646,\n                        \"height\": 0.047038327526132406\n                    },\n                    \"rects\": [\n                        {\n                            \"left\": 0.15354838709677418,\n                            \"top\": 0.22125435540069685,\n                            \"width\": 0.13161290322580646,\n                            \"height\": 0.047038327526132406\n                        }\n                    ],\n                    \"pageNumber\": 2\n                }\n            },\n            {\n                \"text\": \" Theorem\",\n                \"position\": {\n                    \"boundingRect\": {\n                        \"left\": 0.13802151587701614,\n                        \"top\": 0.15638791393319904,\n                        \"width\": 0.0795268790952621,\n                        \"height\": 0.016550522648083623\n                    },\n                    \"rects\": [\n                        {\n                            \"left\": 0.13802151587701614,\n                            \"top\": 0.15638791393319904,\n                            \"width\": 0.0795268790952621,\n                            \"height\": 0.016550522648083623\n                        }\n                    ],\n                    \"pageNumber\": 58\n                }\n            },\n            {\n                \"image\": \"data:image/png;base64,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\",\n                \"position\": {\n                    \"boundingRect\": {\n                        \"left\": 0.13470873786407767,\n                        \"top\": 0.18278688524590164,\n                        \"width\": 0.15776699029126215,\n                        \"height\": 0.04918032786885246\n                    },\n                    \"rects\": [\n                        {\n                            \"left\": 0.13470873786407767,\n                            \"top\": 0.18278688524590164,\n                            \"width\": 0.15776699029126215,\n                            \"height\": 0.04918032786885246\n                        }\n                    ],\n                    \"pageNumber\": 58\n                }\n            },\n        ],\n    },\n    {\n        url: \"https://arxiv.org/pdf/1604.02480.pdf\",\n        selections: [],\n    },\n];\n","import React, { useState } from \"react\";\nimport { NormalizedSelection, PdfLoader, PdfViewer, SelectionTooltip } from \"react-pdf-selection\";\nimport { pdfs } from \"./example-pdfs\";\n\nconst App = () => {\n    const [pdfIdx, setPdfIdx] = useState(0);\n    const [selection, setSelection] = useState<NormalizedSelection>();\n    const toggleUrl = () => setPdfIdx(pdfIdx > 0 ? 0 : 1);\n\n    const setAndLogSelection = (highlightTip?: NormalizedSelection) => {\n        console.log(highlightTip);\n        setSelection(highlightTip);\n    };\n\n    return (\n        <div>\n            <div style={{borderBottom: \"1px solid black\", height: \"200px\", width: \"100%\"}}>\n                Topbar\n            </div>\n            <div style={{display: \"flex\"}}>\n                <div style={{borderRight: \"1px solid black\", width: \"33.3333%\"}}>\n                    Sidebar\n                </div>\n                <div style={{width: \"66.6666%\"}}>\n                    <PdfLoader url={pdfs[pdfIdx].url} beforeLoad={<h1>Loading...</h1>}>\n                        {(pdfDocument) => (\n                            <PdfViewer\n                                pdfDocument={pdfDocument}\n                                selections={pdfs[pdfIdx].selections}\n                                enableAreaSelection={(event) => event.altKey}\n                                onTextSelection={setAndLogSelection}\n                                onAreaSelection={setAndLogSelection}\n                            >\n                                <div className=\"pdfViewer__highlight-tip-container\">\n                                    {selection && <SelectionTooltip selection={selection} />}\n                                </div>\n                            </PdfViewer>\n                        )}\n                    </PdfLoader>\n                    <div\n                        style={{\n                            position: \"absolute\",\n                            top: 0,\n                            right: 0,\n                            zIndex: 99,\n                        }}\n                    >\n                        <button onClick={() => toggleUrl()}>Switch document</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}